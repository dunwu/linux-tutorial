<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jenkins è¿ç»´ | LINUX-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/linux-tutorial/favicon.ico">
    <meta name="description" content="æ•°æ®åº“æ•™ç¨‹">
    
    <link rel="preload" href="/linux-tutorial/assets/css/0.styles.45d9d031.css" as="style"><link rel="preload" href="/linux-tutorial/assets/js/app.79a38eea.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/4.fb6e0f89.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/58.6d6fbc82.js" as="script"><link rel="preload" href="/linux-tutorial/assets/js/5.cb43ecfb.js" as="script"><link rel="prefetch" href="/linux-tutorial/assets/js/10.7933187b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/11.b9b41530.js"><link rel="prefetch" href="/linux-tutorial/assets/js/12.70a5dba8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/13.857dcc43.js"><link rel="prefetch" href="/linux-tutorial/assets/js/14.5a603a55.js"><link rel="prefetch" href="/linux-tutorial/assets/js/15.d217acb7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/16.ad565eae.js"><link rel="prefetch" href="/linux-tutorial/assets/js/17.d43e9f56.js"><link rel="prefetch" href="/linux-tutorial/assets/js/18.aa00ff43.js"><link rel="prefetch" href="/linux-tutorial/assets/js/19.43ce44b3.js"><link rel="prefetch" href="/linux-tutorial/assets/js/20.5618e1ff.js"><link rel="prefetch" href="/linux-tutorial/assets/js/21.1c5a41d7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/22.fbe9fdf1.js"><link rel="prefetch" href="/linux-tutorial/assets/js/23.a4fb0e74.js"><link rel="prefetch" href="/linux-tutorial/assets/js/24.e3a23b69.js"><link rel="prefetch" href="/linux-tutorial/assets/js/25.9896afe9.js"><link rel="prefetch" href="/linux-tutorial/assets/js/26.96164082.js"><link rel="prefetch" href="/linux-tutorial/assets/js/27.391033bb.js"><link rel="prefetch" href="/linux-tutorial/assets/js/28.703f74c2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/29.02a952cb.js"><link rel="prefetch" href="/linux-tutorial/assets/js/30.7e13628f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/31.c4652f75.js"><link rel="prefetch" href="/linux-tutorial/assets/js/32.05d2cbec.js"><link rel="prefetch" href="/linux-tutorial/assets/js/33.3b265df8.js"><link rel="prefetch" href="/linux-tutorial/assets/js/34.26330a03.js"><link rel="prefetch" href="/linux-tutorial/assets/js/35.417d706d.js"><link rel="prefetch" href="/linux-tutorial/assets/js/36.0ed775e0.js"><link rel="prefetch" href="/linux-tutorial/assets/js/37.34430c74.js"><link rel="prefetch" href="/linux-tutorial/assets/js/38.87d5e0ff.js"><link rel="prefetch" href="/linux-tutorial/assets/js/39.7b648b3e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/40.3b7a219e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/41.e727eee9.js"><link rel="prefetch" href="/linux-tutorial/assets/js/42.0134c187.js"><link rel="prefetch" href="/linux-tutorial/assets/js/43.175e982f.js"><link rel="prefetch" href="/linux-tutorial/assets/js/44.72d90888.js"><link rel="prefetch" href="/linux-tutorial/assets/js/45.d49955bd.js"><link rel="prefetch" href="/linux-tutorial/assets/js/46.a9c290ec.js"><link rel="prefetch" href="/linux-tutorial/assets/js/47.cc639f04.js"><link rel="prefetch" href="/linux-tutorial/assets/js/48.98c78321.js"><link rel="prefetch" href="/linux-tutorial/assets/js/49.a7c3afed.js"><link rel="prefetch" href="/linux-tutorial/assets/js/50.22d8c542.js"><link rel="prefetch" href="/linux-tutorial/assets/js/51.28055fcd.js"><link rel="prefetch" href="/linux-tutorial/assets/js/52.f8103df5.js"><link rel="prefetch" href="/linux-tutorial/assets/js/53.76541550.js"><link rel="prefetch" href="/linux-tutorial/assets/js/54.e78d2776.js"><link rel="prefetch" href="/linux-tutorial/assets/js/55.3ce3079c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/56.832958c9.js"><link rel="prefetch" href="/linux-tutorial/assets/js/57.961ce896.js"><link rel="prefetch" href="/linux-tutorial/assets/js/59.d5e48112.js"><link rel="prefetch" href="/linux-tutorial/assets/js/6.c8f4721c.js"><link rel="prefetch" href="/linux-tutorial/assets/js/60.7927b23b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/61.ee233f24.js"><link rel="prefetch" href="/linux-tutorial/assets/js/62.6ba50cc7.js"><link rel="prefetch" href="/linux-tutorial/assets/js/63.9cbf9f2b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/64.0be148a4.js"><link rel="prefetch" href="/linux-tutorial/assets/js/65.c520257e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/66.f2335390.js"><link rel="prefetch" href="/linux-tutorial/assets/js/67.e5737218.js"><link rel="prefetch" href="/linux-tutorial/assets/js/68.46427a01.js"><link rel="prefetch" href="/linux-tutorial/assets/js/69.450417bb.js"><link rel="prefetch" href="/linux-tutorial/assets/js/7.046e5a1b.js"><link rel="prefetch" href="/linux-tutorial/assets/js/70.072034d2.js"><link rel="prefetch" href="/linux-tutorial/assets/js/8.77fb8967.js"><link rel="prefetch" href="/linux-tutorial/assets/js/9.ebfa537e.js"><link rel="prefetch" href="/linux-tutorial/assets/js/vendors~flowchart.20a64d45.js"><link rel="prefetch" href="/linux-tutorial/assets/js/vendors~notification.ea176280.js">
    <link rel="stylesheet" href="/linux-tutorial/assets/css/0.styles.45d9d031.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/linux-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="LINUX-TUTORIAL" class="logo"> <span class="site-name can-hide">LINUX-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/linux-tutorial/linux/cli/" class="nav-link">
  Linux å‘½ä»¤
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/ops/" class="nav-link">
  Linux è¿ç»´
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/soft/" class="nav-link router-link-active">
  Linux è½¯ä»¶è¿ç»´
</a></div><div class="nav-item"><a href="/linux-tutorial/docker/" class="nav-link">
  Docker æ•™ç¨‹
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/linux-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/linux-tutorial/linux/cli/" class="nav-link">
  Linux å‘½ä»¤
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/ops/" class="nav-link">
  Linux è¿ç»´
</a></div><div class="nav-item"><a href="/linux-tutorial/linux/soft/" class="nav-link router-link-active">
  Linux è½¯ä»¶è¿ç»´
</a></div><div class="nav-item"><a href="/linux-tutorial/docker/" class="nav-link">
  Docker æ•™ç¨‹
</a></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/dunwu/linux-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Jenkins è¿ç»´</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linux-tutorial/linux/soft/jenkins-ops.html#jenkins-ç®€ä»‹" class="sidebar-link">Jenkins ç®€ä»‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#jenkins-æ˜¯ä»€ä¹ˆ" class="sidebar-link">Jenkins æ˜¯ä»€ä¹ˆ</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#ci-cd-æ˜¯ä»€ä¹ˆ" class="sidebar-link">CI/CD æ˜¯ä»€ä¹ˆ</a></li></ul></li><li><a href="/linux-tutorial/linux/soft/jenkins-ops.html#jenkins-å®‰è£…" class="sidebar-link">Jenkins å®‰è£…</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#war-åŒ…éƒ¨ç½²" class="sidebar-link">War åŒ…éƒ¨ç½²</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#rpm-åŒ…éƒ¨ç½²" class="sidebar-link">rpm åŒ…éƒ¨ç½²</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#è®¿é—®" class="sidebar-link">è®¿é—®</a></li></ul></li><li><a href="/linux-tutorial/linux/soft/jenkins-ops.html#jenkins-åŸºæœ¬ä½¿ç”¨" class="sidebar-link">Jenkins åŸºæœ¬ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#general" class="sidebar-link">General</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#source-code-management" class="sidebar-link">Source Code Management</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#build-triggers" class="sidebar-link">Build Triggers</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#build-environment" class="sidebar-link">Build Environment</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#build" class="sidebar-link">Build</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#post-build-actions" class="sidebar-link">Post-build Actions</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#å¼€å§‹æ„å»º" class="sidebar-link">å¼€å§‹æ„å»º</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#æ„å»ºç»“æœ" class="sidebar-link">æ„å»ºç»“æœ</a></li></ul></li><li><a href="/linux-tutorial/linux/soft/jenkins-ops.html#å…¶ä»–ç›¸å…³é…ç½®" class="sidebar-link">å…¶ä»–ç›¸å…³é…ç½®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#ssh-server-é…ç½®" class="sidebar-link">SSH Server é…ç½®</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#é…ç½®-gitlab-webhooks" class="sidebar-link">é…ç½® Gitlab webhooks</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#jenkins-æƒé™ç®¡ç†" class="sidebar-link">jenkins æƒé™ç®¡ç†</a></li></ul></li><li><a href="/linux-tutorial/linux/soft/jenkins-ops.html#jenkins-faq" class="sidebar-link">Jenkins FAQ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#ç™»å½•å¯†ç " class="sidebar-link">ç™»å½•å¯†ç </a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#å¿˜è®°å¯†ç " class="sidebar-link">å¿˜è®°å¯†ç </a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#å¡åœ¨-check-é¡µé¢" class="sidebar-link">å¡åœ¨ check é¡µé¢</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#å¡åœ¨-getting-startted-é¡µé¢" class="sidebar-link">å¡åœ¨ getting startted é¡µé¢</a></li><li class="sidebar-sub-header"><a href="/linux-tutorial/linux/soft/jenkins-ops.html#ä»¥-root-ç”¨æˆ·è¿è¡Œ" class="sidebar-link">ä»¥ root ç”¨æˆ·è¿è¡Œ</a></li></ul></li><li><a href="/linux-tutorial/linux/soft/jenkins-ops.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jenkins-è¿ç»´"><a href="#jenkins-è¿ç»´" class="header-anchor">#</a> Jenkins è¿ç»´</h1> <blockquote><p>ç¯å¢ƒè¦æ±‚</p> <ul><li>JDKï¼šJDK7+ï¼Œå®˜ç½‘æ¨èæ˜¯ JDK 8</li> <li>Jenkinsï¼š2.190.1</li></ul></blockquote> <h2 id="jenkins-ç®€ä»‹"><a href="#jenkins-ç®€ä»‹" class="header-anchor">#</a> Jenkins ç®€ä»‹</h2> <h3 id="jenkins-æ˜¯ä»€ä¹ˆ"><a href="#jenkins-æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> Jenkins æ˜¯ä»€ä¹ˆ</h3> <p>Jenkins æ˜¯ä¸€æ¬¾å¼€æº CI&amp;CD è½¯ä»¶ï¼Œç”¨äºè‡ªåŠ¨åŒ–å„ç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²è½¯ä»¶ã€‚</p> <p>Jenkins æ”¯æŒå„ç§è¿è¡Œæ–¹å¼ï¼Œå¯é€šè¿‡ç³»ç»ŸåŒ…ã€Docker æˆ–è€…é€šè¿‡ä¸€ä¸ªç‹¬ç«‹çš„ Java ç¨‹åºã€‚</p> <h3 id="ci-cd-æ˜¯ä»€ä¹ˆ"><a href="#ci-cd-æ˜¯ä»€ä¹ˆ" class="header-anchor">#</a> CI/CD æ˜¯ä»€ä¹ˆ</h3> <p>CI(Continuous integrationï¼Œä¸­æ–‡æ„æ€æ˜¯æŒç»­é›†æˆ)æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘æ—¶é—´ã€‚æŒç»­é›†æˆå¼ºè°ƒå¼€å‘äººå‘˜æäº¤äº†æ–°ä»£ç ä¹‹åï¼Œç«‹åˆ»è¿›è¡Œæ„å»ºã€ï¼ˆå•å…ƒï¼‰æµ‹è¯•ã€‚æ ¹æ®æµ‹è¯•ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæ–°ä»£ç å’ŒåŸæœ‰ä»£ç èƒ½å¦æ­£ç¡®åœ°é›†æˆåœ¨ä¸€èµ·ã€‚å€Ÿç”¨ç½‘ç»œå›¾ç‰‡å¯¹ CI åŠ ä»¥ç†è§£ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310174528.png" alt="img"></p> <p>CD(Continuous Deliveryï¼Œ ä¸­æ–‡æ„æ€æŒç»­äº¤ä»˜)æ˜¯åœ¨æŒç»­é›†æˆçš„åŸºç¡€ä¸Šï¼Œå°†é›†æˆåçš„ä»£ç éƒ¨ç½²åˆ°æ›´è´´è¿‘çœŸå®è¿è¡Œç¯å¢ƒ(ç±»ç”Ÿäº§ç¯å¢ƒ)ä¸­ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å®Œæˆå•å…ƒæµ‹è¯•åï¼Œå¯ä»¥æŠŠä»£ç éƒ¨ç½²åˆ°è¿æ¥æ•°æ®åº“çš„ Staging ç¯å¢ƒä¸­æ›´å¤šçš„æµ‹è¯•ã€‚å¦‚æœä»£ç æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥ç»§ç»­æ‰‹åŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ä¸‹å›¾ååº”çš„æ˜¯ CI/CD çš„å¤§æ¦‚å·¥ä½œæ¨¡å¼ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310174544.png" alt="img"></p> <h2 id="jenkins-å®‰è£…"><a href="#jenkins-å®‰è£…" class="header-anchor">#</a> Jenkins å®‰è£…</h2> <blockquote><p>æ›´è¯¦ç»†å†…å®¹è¯·å‚è€ƒï¼š<a href="https://jenkins.io/zh/doc/book/installing/" target="_blank" rel="noopener noreferrer">Jenkins å®˜æ–¹å®‰è£…æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="war-åŒ…éƒ¨ç½²"><a href="#war-åŒ…éƒ¨ç½²" class="header-anchor">#</a> War åŒ…éƒ¨ç½²</h3> <p>å®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼š</p> <p>ï¼ˆ1ï¼‰ä¸‹è½½å¹¶è§£å‹åˆ°æœ¬åœ°</p> <p>è¿›å…¥<a href="https://jenkins.io/zh/download/" target="_blank" rel="noopener noreferrer">å®˜ç½‘ä¸‹è½½åœ°å€<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ä¸‹è½½ã€‚</p> <p>æˆ‘é€‰æ‹©çš„æ˜¯æœ€æ–°ç¨³å®š war ç‰ˆæœ¬ 2.89.4ï¼šhttp://mirrors.jenkins.io/war-stable/latest/jenkins.war</p> <p>æˆ‘ä¸ªäººå–œæ¬¢å­˜æ”¾åœ¨ï¼š<code>/opt/software/jenkins</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> -p /opt/software/jenkins
<span class="token function">wget</span> -O /opt/software/jenkins/jenkins.war http://mirrors.jenkins.io/war-stable/latest/jenkins.wa
</code></pre></div><p>ï¼ˆ2ï¼‰å¯åŠ¨</p> <p>å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ï¼Œé€‰æ‹© war ç‰ˆæœ¬ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°† war ç§»åˆ° Tomcat çš„ webapps ç›®å½•ä¸‹ï¼Œé€šè¿‡ Tomcat æ¥å¯åŠ¨ã€‚</p> <p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>java -jar</code> æ–¹å¼æ¥å¯åŠ¨ã€‚</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /opt/software/jenkins
<span class="token function">nohup</span> java -jar jenkins.war --httpPort<span class="token operator">=</span><span class="token number">8080</span> <span class="token operator">&gt;&gt;</span> nohup.out <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre></div><h3 id="rpm-åŒ…éƒ¨ç½²"><a href="#rpm-åŒ…éƒ¨ç½²" class="header-anchor">#</a> rpm åŒ…éƒ¨ç½²</h3> <p>ï¼ˆ1ï¼‰ä¸‹è½½å®‰è£…</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">wget</span> -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo
<span class="token function">sudo</span> <span class="token function">rpm</span> --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key
yum <span class="token function">install</span> jenkins
</code></pre></div><p>ï¼ˆ2ï¼‰å¯åŠ¨</p> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl start jenkins
</code></pre></div><h3 id="è®¿é—®"><a href="#è®¿é—®" class="header-anchor">#</a> è®¿é—®</h3> <ol><li>æ‰“å¼€æµè§ˆå™¨è¿›å…¥é“¾æ¥ <code>http://localhost:8080</code>.</li> <li>æŒ‰ç…§è¯´æ˜å®Œæˆå®‰è£….</li></ol> <h2 id="jenkins-åŸºæœ¬ä½¿ç”¨"><a href="#jenkins-åŸºæœ¬ä½¿ç”¨" class="header-anchor">#</a> Jenkins åŸºæœ¬ä½¿ç”¨</h2> <p>Jenkins æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ CI å·¥å…·ï¼Œè™½ç„¶æœ¬èº«ä½¿ç”¨ Java å¼€å‘ï¼Œä½†ä¹Ÿèƒ½ç”¨æ¥åšå…¶ä»–è¯­è¨€å¼€å‘çš„é¡¹ç›® CIã€‚ä¸‹é¢è®²è§£å¦‚ä½•ä½¿ç”¨ Jenkins åˆ›å»ºä¸€ä¸ªæ„å»ºä»»åŠ¡ã€‚</p> <p>ç™»å½• Jenkinsï¼Œ ç‚¹å‡»å·¦ä¾§çš„æ–°å»ºï¼Œåˆ›å»ºæ–°çš„æ„å»ºä»»åŠ¡ã€‚</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-22b3c49af599565d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/374/format/webp" alt="img"></p> <p>è·³è½¬åˆ°å¦‚ä¸‹ç•Œé¢ã€‚ä»»åŠ¡åç§°å¯ä»¥è‡ªè¡Œè®¾å®šï¼Œä½†éœ€è¦å…¨å±€å”¯ä¸€ã€‚è¾“å…¥åç§°åé€‰æ‹©æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®(å…¶ä»–é€‰é¡¹ä¸ä½œä»‹ç»)ã€‚å¹¶ç‚¹å‡»ä¸‹æ–¹çš„ç¡®å®šæŒ‰é’®å³åˆ›å»ºäº†ä¸€ä¸ªæ„å»ºä»»åŠ¡ã€‚ä¹‹åä¼šè‡ªåŠ¨è·³è½¬åˆ°è¯¥ job çš„é…ç½®é¡µé¢ã€‚</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-0febc0bc4ca3cadd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1044/format/webp" alt="img"></p> <p>æ–°å»ºè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›®</p> <p>ä¸‹å›¾æ˜¯æ„å»ºä»»åŠ¡è®¾ç½®ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šæ–¹çš„å‡ ä¸ªé€‰é¡¹**&quot;General&quot;, &quot;æºç ç®¡ç†&quot;ï¼Œ &quot;æ„å»ºè§¦å‘å™¨&quot;ï¼Œ&quot;æ„å»ºç¯å¢ƒ&quot;ï¼Œ &quot;æ„å»º&quot;ï¼Œ &quot;æ„å»ºåæ“ä½œ&quot;**ã€‚ä¸‹é¢é€ä¸€ä»‹ç»ã€‚</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-77998a3e6a70b83f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1032/format/webp" alt="img"></p> <h3 id="general"><a href="#general" class="header-anchor">#</a> General</h3> <p>General æ˜¯æ„å»ºä»»åŠ¡çš„ä¸€äº›åŸºæœ¬é…ç½®ã€‚åç§°ï¼Œæè¿°ä¹‹ç±»çš„ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310221814.png" alt="img"></p> <p>é‡è¦é…ç½®é¡¹ï¼š</p> <ul><li><strong>Description</strong>ï¼šå¯¹æ„å»ºä»»åŠ¡çš„æè¿°ã€‚</li> <li><strong>Discard old builds</strong>ï¼šæœåŠ¡å™¨èµ„æºæ˜¯æœ‰é™çš„ï¼Œæœ‰æ—¶å€™ä¿å­˜äº†å¤ªå¤šçš„å†å²æ„å»ºï¼Œä¼šå¯¼è‡´ Jenkins é€Ÿåº¦å˜æ…¢ï¼Œå¹¶ä¸”æœåŠ¡å™¨ç¡¬ç›˜èµ„æºä¹Ÿä¼šè¢«å æ»¡ã€‚å½“ç„¶ä¸‹æ–¹çš„&quot;ä¿æŒæ„å»ºå¤©æ•°&quot; å’Œ ä¿æŒæ„å»ºçš„æœ€å¤§ä¸ªæ•°æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µç¡®å®šä¸€ä¸ªåˆç†çš„å€¼ã€‚</li></ul> <p>ç‚¹å‡»å³æ–¹çš„é—®å·å›¾æ ‡å¯ä»¥æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ã€‚</p> <h3 id="source-code-management"><a href="#source-code-management" class="header-anchor">#</a> Source Code Management</h3> <p><strong>Source Code Management</strong>ï¼Œå³æºç ç®¡ç†ï¼Œå°±æ˜¯é…ç½®ä½ ä»£ç çš„å­˜æ”¾ä½ç½®ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310222110.png" alt="img"></p> <ul><li><strong>Git:</strong> æ”¯æŒä¸»æµçš„ Github å’Œ Gitlab ä»£ç ä»“åº“ã€‚å› æˆ‘ä»¬çš„ç ”å‘å›¢é˜Ÿä½¿ç”¨çš„æ˜¯ gitlabï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘åªä¼šå¯¹è¯¥é¡¹è¿›è¡Œä»‹ç»ã€‚</li> <li><strong>Repository URL</strong>ï¼šä»“åº“åœ°å€ã€‚</li> <li><strong>Credentials</strong>ï¼šå‡­è¯ã€‚å¯ä»¥ä½¿ç”¨ HTTP æ–¹å¼çš„ç”¨æˆ·åå¯†ç ï¼Œä¹Ÿå¯ä»¥æ˜¯ RSA æ–‡ä»¶ã€‚ ä½†è¦é€šè¿‡åé¢çš„&quot;ADD&quot;æŒ‰é’®æ·»åŠ å‡­è¯ã€‚</li> <li><strong>Branches to build</strong>ï¼šæ„å»ºçš„åˆ†æ”¯ã€‚<code>*/master</code> è¡¨ç¤º master åˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå…¶ä»–åˆ†æ”¯ã€‚</li> <li><strong>Repository browser</strong>ï¼šä½ æ‰€ä½¿ç”¨çš„ä»£ç ä»“åº“ç®¡ç†å·¥å…·ï¼Œå¦‚ Githubã€Gitlab.</li> <li><strong>Subversion</strong>ï¼šå³ SVNï¼Œè¿™é‡Œä¸ä½œä»‹ç»ã€‚</li></ul> <h3 id="build-triggers"><a href="#build-triggers" class="header-anchor">#</a> Build Triggers</h3> <p><strong>Build Triggers</strong>ï¼Œå³æ„å»ºè§¦å‘å™¨ï¼Œç”¨äºæ„å»ºä»»åŠ¡çš„è§¦å‘å™¨ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310222608.png" alt="img"></p> <p>é…ç½®è¯´æ˜ï¼š</p> <ul><li><strong>Trigger builds remotely (e.g., from scripts)</strong>ï¼šè§¦å‘è¿œç¨‹æ„å»º(ä¾‹å¦‚ï¼Œä½¿ç”¨è„šæœ¬)ã€‚è¯¥é€‰é¡¹ä¼šæä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥ç”¨æ¥åœ¨ä»£ç å±‚é¢è§¦å‘æ„å»ºã€‚</li> <li><strong>Build after other projects are built</strong>ï¼šè¯¥é€‰é¡¹æ„æ€æ˜¯&quot;åœ¨å…¶ä»–é¡¹ç›®æ„å»ºåå†æ„å»º&quot;ã€‚</li> <li><strong>Build periodically</strong>ï¼šå‘¨æœŸæ€§çš„æ„å»ºã€‚å°±æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´è¿›è¡Œæ„å»ºã€‚æ—¥ç¨‹è¡¨ç±»ä¼¼ linux crontab ä¹¦å†™æ ¼å¼ã€‚å¦‚ï¼š<code>H/30 * * * *</code>ï¼Œè¡¨ç¤ºæ¯éš” 30 åˆ†é’Ÿè¿›è¡Œä¸€æ¬¡æ„å»ºã€‚</li> <li>**Build when a change is pushed to GitLabï¼š**å½“æœ‰ git push åˆ° Gitlab ä»“åº“ï¼Œå³è§¦å‘æ„å»ºã€‚åé¢ä¼šæœ‰ä¸€ä¸ªè§¦å‘æ„å»ºçš„åœ°å€ï¼Œä¸€èˆ¬è¢«ç§°ä¸º webhooksã€‚éœ€è¦å°†è¿™ä¸ªåœ°å€é…ç½®åˆ° gitlab ä¸­ï¼Œwebhooks å¦‚ä½•é…ç½®åé¢ä»‹ç»ã€‚è¿™ä¸ªæ˜¯å¸¸ç”¨çš„æ„å»ºè§¦å‘å™¨ã€‚</li> <li>**Poll SCMï¼š**è¯¥é€‰é¡¹æ˜¯é…åˆä¸Šé¢è¿™ä¸ªé€‰é¡¹ä½¿ç”¨çš„ã€‚å½“ä»£ç ä»“åº“å‘ç”Ÿæ”¹åŠ¨ï¼Œjenkins å¹¶ä¸çŸ¥é“ã€‚éœ€è¦é…ç½®è¿™ä¸ªé€‰é¡¹ï¼Œå‘¨æœŸæ€§çš„å»æ£€æŸ¥ä»£ç ä»“åº“æ˜¯å¦å‘ç”Ÿæ”¹åŠ¨ã€‚</li></ul> <h3 id="build-environment"><a href="#build-environment" class="header-anchor">#</a> Build Environment</h3> <p><strong>Build Environment</strong>ï¼Œå³æ„å»ºç¯å¢ƒï¼Œé…ç½®æ„å»ºå‰çš„ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œå¦‚æŒ‡å®šæ„å»ºå·¥å…·ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310223004.png" alt="img"></p> <h3 id="build"><a href="#build" class="header-anchor">#</a> Build</h3> <p>Buildï¼Œå³æ„å»ºã€‚</p> <p>ç‚¹å‡»ä¸‹å›¾ä¸­çš„ Add build step æŒ‰é’®ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæ„å»ºä»»åŠ¡èœå•ï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦æ¥é€‰æ‹©ã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310223241.png" alt="img"></p> <p>ã€è¯´æ˜ã€‘</p> <ul><li><strong>Copy artifacts from another project</strong>ï¼šä»å…¶ä»–é¡¹ç›®è·å–æ„å»ºã€‚ä¸€èˆ¬å½“æœ¬ä»»åŠ¡æœ‰ä¸Šæ¸¸ä»»åŠ¡ï¼Œéœ€è¦è·å–ä¸Šæ¸¸ä»»åŠ¡çš„æ„ä»¶æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚ï¼šæœ‰ä¸ª Java Web é¡¹ç›®ï¼Œéœ€è¦ä¾èµ–äºä¸Šä¸€ä¸ªå‰ç«¯æ„å»ºä»»åŠ¡è¾“å‡ºçš„é™æ€æ–‡ä»¶å‹ç¼©åŒ…ã€‚</li> <li>Eexcute NodeJS scriptï¼šæ‰§è¡Œ Nodejs è„šæœ¬ã€‚é»˜è®¤æ”¯æŒ nodejsã€npm å‘½ä»¤ã€‚</li> <li><strong>Eexcute shell</strong>ï¼š æ‰§è¡Œ shell è„šæœ¬ã€‚ç”¨äº Linux ç¯å¢ƒã€‚</li> <li><strong>Execute Windows batch command</strong>ï¼šæ‰§è¡Œ batch è„šæœ¬ã€‚ç”¨äº Windows ç¯å¢ƒã€‚</li> <li><strong>Invoke Ant</strong>ï¼šAnt æ˜¯ä¸€æ¬¾ java é¡¹ç›®æ„å»ºå·¥å…·ã€‚</li> <li><strong>Invoke Gradle script</strong>ï¼šGradle æ„å»ºé¡¹ç›®ã€‚</li> <li><strong>Invoke top-level Maven targets</strong>ï¼šMaven æ„å»ºé¡¹ç›®ã€‚</li></ul> <h3 id="post-build-actions"><a href="#post-build-actions" class="header-anchor">#</a> Post-build Actions</h3> <p><strong>Post-build Actions</strong>ï¼Œå³æ„å»ºåæ“ä½œï¼Œç”¨äºæ„å»ºå®Œæœ¬é¡¹ç›®çš„ä¸€äº›åç»­æ“ä½œï¼Œæ¯”å¦‚ç”Ÿæˆç›¸åº”çš„ä»£ç æµ‹è¯•æŠ¥å‘Šã€‚</p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310224106.png" alt="img"></p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310224254.png" alt="img"></p> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310224331.png" alt="img"></p> <p>ä¸ªäººè¾ƒå¸¸ç”¨çš„é…ç½®ï¼š</p> <ul><li><strong>Archive the artifacts</strong>ï¼šå½’æ¡£æ„ä»¶ã€‚</li> <li><strong>Build other projects</strong>ï¼šæ„å»ºå…¶ä»–é¡¹ç›®ã€‚</li> <li><strong>Trigger parameterized build on other projects</strong>ï¼šæ„å»ºå…¶ä»–é¡¹ç›®ï¼Œå¹¶ä¼ è¾“æ„å»ºå‚æ•°ã€‚</li> <li><strong>Publish JUnit test result report</strong>ï¼šå‘å¸ƒ Junit æµ‹è¯•æŠ¥å‘Šã€‚</li> <li><strong>E-mail Notification</strong>ï¼šé‚®ä»¶é€šçŸ¥ï¼Œæ„å»ºå®Œæˆåå‘é‚®ä»¶åˆ°æŒ‡å®šçš„é‚®ç®±ã€‚</li></ul> <hr> <p><strong>ä»¥ä¸Šé…ç½®å®Œæˆåï¼Œç‚¹å‡»ä¿å­˜å³å¯ã€‚</strong></p> <h3 id="å¼€å§‹æ„å»º"><a href="#å¼€å§‹æ„å»º" class="header-anchor">#</a> å¼€å§‹æ„å»º</h3> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310224927.png" alt="img"></p> <p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€åˆ‡é…ç½®å¥½åï¼Œå³å¯ç‚¹å‡» <strong>Build Now</strong> å¼€å§‹æ„å»ºã€‚</p> <h3 id="æ„å»ºç»“æœ"><a href="#æ„å»ºç»“æœ" class="header-anchor">#</a> æ„å»ºç»“æœ</h3> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200310225234.png" alt="img"></p> <ul><li><strong>æ„å»ºçŠ¶æ€</strong> <ul><li><strong>Successful è“è‰²</strong>ï¼šæ„å»ºå®Œæˆï¼Œå¹¶ä¸”è¢«è®¤ä¸ºæ˜¯ç¨³å®šçš„ã€‚</li> <li><strong>Unstable é»„è‰²</strong>ï¼šæ„å»ºå®Œæˆï¼Œä½†è¢«è®¤ä¸ºæ˜¯ä¸ç¨³å®šçš„ã€‚</li> <li><strong>Failed çº¢è‰²</strong>ï¼šæ„å»ºå¤±è´¥ã€‚</li> <li><strong>Disable ç°è‰²</strong>ï¼šæ„å»ºå·²ç¦ç”¨</li></ul></li> <li><strong>æ„å»ºç¨³å®šæ€§</strong> <ul><li>æ„å»ºç¨³å®šæ€§ç”¨å¤©æ°”è¡¨ç¤ºï¼š<strong>æ™´ã€æ™´è½¬å¤šäº‘ã€å¤šäº‘ã€å°é›¨ã€é›·é˜µé›¨</strong>ã€‚å¤©æ°”è¶Šå¥½è¡¨ç¤ºæ„å»ºè¶Šç¨³å®šï¼Œåä¹‹äº¦ç„¶ã€‚</li></ul></li> <li>æ„å»ºå†å²ç•Œé¢
<ul><li><strong>console output</strong>ï¼šè¾“å‡ºæ„å»ºçš„æ—¥å¿—ä¿¡æ¯</li></ul></li></ul> <h2 id="å…¶ä»–ç›¸å…³é…ç½®"><a href="#å…¶ä»–ç›¸å…³é…ç½®" class="header-anchor">#</a> å…¶ä»–ç›¸å…³é…ç½®</h2> <h3 id="ssh-server-é…ç½®"><a href="#ssh-server-é…ç½®" class="header-anchor">#</a> SSH Server é…ç½®</h3> <p>ç™»å½• jenkins -&gt; ç³»ç»Ÿç®¡ç† -&gt; ç³»ç»Ÿè®¾ç½®</p> <p>é…ç½®è¯·çœ‹ä¸‹å›¾ï¼š</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-15476f9e273daa58.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1108/format/webp" alt="img"></p> <p>é‡è¦é…ç½®ï¼š</p> <ul><li><p><strong>SSH Servers:</strong> ç”±äº jenkins æœåŠ¡å™¨å…¬é’¥æ–‡ä»¶æˆ‘å·²ç»é…ç½®å¥½ï¼Œæ‰€ä»¥ä¹‹åæ–°å¢ SSH Servers åªéœ€è¦é…ç½®è¿™ä¸€é¡¹å³å¯ã€‚</p></li> <li><p><strong>Nameï¼š</strong> è‡ªå®šä¹‰ï¼Œéœ€è¦å…¨å±€å”¯ä¸€ã€‚</p></li> <li><p><strong>HostName:</strong> ä¸»æœºåï¼Œç›´æ¥ç”¨ ip åœ°å€å³å¯ã€‚</p></li> <li><p><strong>Username:</strong> æ–°å¢ Server çš„ç”¨æˆ·åï¼Œè¿™é‡Œé…ç½®çš„æ˜¯ rootã€‚</p></li> <li><p><strong>Remote Directory:</strong> è¿œç¨‹ç›®å½•ã€‚jenkins æœåŠ¡å™¨å‘é€æ–‡ä»¶ç»™æ–°å¢çš„ server é»˜è®¤æ˜¯åœ¨è¿™ä¸ªç›®å½•ã€‚</p></li></ul> <h3 id="é…ç½®-gitlab-webhooks"><a href="#é…ç½®-gitlab-webhooks" class="header-anchor">#</a> é…ç½® Gitlab webhooks</h3> <p>åœ¨ gitlab çš„ project é¡µé¢ æ‰“å¼€<strong>settings</strong>ï¼Œå†æ‰“å¼€ <strong>web hooks</strong> ã€‚ç‚¹å‡»**&quot;ADD WEB HOOK&quot;** æ·»åŠ  webhookã€‚æŠŠä¹‹å‰ jenkins é…ç½®ä¸­çš„é‚£ä¸ª url æ·»åŠ åˆ°è¿™é‡Œï¼Œæ·»åŠ å®Œæˆåï¼Œç‚¹å‡»**&quot;TEST HOOK&quot;**è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœæ˜¾ç¤º SUCCESS åˆ™è¡¨ç¤ºæ·»åŠ æˆåŠŸã€‚</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-9f8d04a1400556f9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/246/format/webp" alt="img"></p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-154a62db330c819b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/240/format/webp" alt="img"></p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-e4d1ea1e1dbde812.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1036/format/webp" alt="img"></p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-c7a687207b2c26fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1106/format/webp" alt="img"></p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-ce8ae810bc2cb0d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1154/format/webp" alt="img"></p> <p>é…ç½® phpunit.xml</p> <p>phpunit.xml æ˜¯ phpunit è¿™ä¸ªå·¥å…·ç”¨æ¥å•å…ƒæµ‹è¯•æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶çš„åç§°åŒæ ·ä¹Ÿæ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œä½†æ˜¯è¦åœ¨&quot;build.xml&quot;ä¸­é…ç½®å¥½åå­—å°±è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨&quot;phpunit.xml&quot;, åˆ™ä¸éœ€è¦åœ¨&quot;build.xml&quot;ä¸­é…ç½®æ–‡ä»¶åã€‚</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-aa212d3b3eaff548.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/798/format/webp" alt="img"></p> <p>build.xml ä¸­ phpunit é…ç½®</p> <p>fileset dir æŒ‡å®šå•å…ƒæµ‹è¯•æ–‡ä»¶æ‰€åœ¨è·¯å¾„ï¼Œinclude æŒ‡å®šåŒ…å«å“ªäº›æ–‡ä»¶ï¼Œæ”¯æŒé€šé…ç¬¦åŒ¹é…ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ exclude å…³é”®å­—æŒ‡å®šä¸åŒ…å«çš„æ–‡ä»¶ã€‚</p> <p><img src="https:////upload-images.jianshu.io/upload_images/6464255-dbc0084f6d50a240.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p> <h3 id="jenkins-æƒé™ç®¡ç†"><a href="#jenkins-æƒé™ç®¡ç†" class="header-anchor">#</a> jenkins æƒé™ç®¡ç†</h3> <p>ç”±äº jenkins é»˜è®¤çš„æƒé™ç®¡ç†ä½“ç³»ä¸æ”¯æŒç”¨æˆ·ç»„æˆ–è§’è‰²çš„é…ç½®ï¼Œå› æ­¤éœ€è¦å®‰è£…ç¬¬ä¸‰å‘æ’ä»¶æ¥æ”¯æŒè§’è‰²çš„é…ç½®ï¼Œæœ¬æ–‡å°†ä½¿ç”¨ Role Strategy Pluginã€‚åŸºäºè¿™ä¸ªæ’ä»¶çš„æƒé™ç®¡ç†è®¾ç½®è¯·å‚è€ƒè¿™ç¯‡æ–‡ç« :<a href="https://link.jianshu.com?t=http%3A%2F%2Fblog.csdn.net%2Fruss44%2Farticle%2Fdetails%2F52276222" target="_blank" rel="noopener noreferrer">http://blog.csdn.net/russ44/article/details/52276222<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œè¿™é‡Œä¸ä½œè¯¦ç»†ä»‹ç»ã€‚</p> <p>è‡³æ­¤ï¼Œå°±å¯ä»¥ç”¨ jenkins å‘¨è€Œå¤å§‹çš„è¿›è¡Œ CI äº†ï¼Œå½“ç„¶ jenkins æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼ŒåŠŸèƒ½ç»ä¸ä»…ä»…æ˜¯ä»¥ä¸Šè¿™äº›ï¼Œå…¶ä»–æ–¹é¢è¦æ˜¯ä»¥åç”¨åˆ°ï¼Œæˆ‘ä¼šæ›´æ–°åˆ°è¿™ç¯‡æ–‡ç« ä¸­ã€‚æœ‰ç–‘é—®æ¬¢è¿åœ¨ä¸‹æ–¹ç•™è¨€ã€‚</p> <h2 id="jenkins-faq"><a href="#jenkins-faq" class="header-anchor">#</a> Jenkins FAQ</h2> <h3 id="ç™»å½•å¯†ç "><a href="#ç™»å½•å¯†ç " class="header-anchor">#</a> ç™»å½•å¯†ç </h3> <p>å¦‚æœä¸çŸ¥é“åˆå§‹ç™»å½•å¯†ç ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹ï¼š</p> <p>æ‰§è¡Œå‘½ä»¤ <code>cat /root/.jenkins/secrets/initialAdminPassword</code>ï¼Œæ‰“å°å‡ºæ¥çš„å³æ˜¯åˆå§‹ç™»å½•å¯†ç ã€‚</p> <h3 id="å¿˜è®°å¯†ç "><a href="#å¿˜è®°å¯†ç " class="header-anchor">#</a> å¿˜è®°å¯†ç </h3> <p>1.æ‰§è¡Œ <code>vim /root/.jenkins/config.xml</code> ï¼Œåˆ é™¤ä»¥ä¸‹å†…å®¹</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>useSecurity</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>useSecurity</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizationStrategy</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hudson.security.FullControlOnceLoggedInAuthorizationStrategy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>denyAnonymousReadAccess</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>denyAnonymousReadAccess</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizationStrategy</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>securityRealm</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hudson.security.HudsonPrivateSecurityRealm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>disableSignup</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>disableSignup</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enableCaptcha</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enableCaptcha</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>securityRealm</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2.é‡å¯ Jenkins æœåŠ¡ï¼›</p> <p>3.è¿›å…¥é¦–é¡µ&gt;â€œç³»ç»Ÿç®¡ç†â€&gt;â€œConfigure Global Securityâ€ï¼›</p> <p>4.å‹¾é€‰â€œå¯ç”¨å®‰å…¨â€ï¼›</p> <p>5.ç‚¹é€‰â€œJenkins ä¸“æœ‰ç”¨æˆ·æ•°æ®åº“â€ï¼Œå¹¶ç‚¹å‡»â€œä¿å­˜â€ï¼›</p> <p>6.é‡æ–°ç‚¹å‡»é¦–é¡µ&gt;â€œç³»ç»Ÿç®¡ç†â€,å‘ç°æ­¤æ—¶å‡ºç°â€œç®¡ç†ç”¨æˆ·â€ï¼›</p> <p>7.ç‚¹å‡»è¿›å…¥å±•ç¤ºâ€œç”¨æˆ·åˆ—è¡¨â€ï¼›</p> <p>8.ç‚¹å‡»å³ä¾§è¿›å…¥ä¿®æ”¹å¯†ç é¡µé¢ï¼Œä¿®æ”¹åå³å¯é‡æ–°ç™»å½•ã€‚</p> <h3 id="å¡åœ¨-check-é¡µé¢"><a href="#å¡åœ¨-check-é¡µé¢" class="header-anchor">#</a> å¡åœ¨ check é¡µé¢</h3> <p><strong>ç°è±¡</strong>ï¼šè¾“å…¥å¯†ç åï¼Œå¡åœ¨ check é¡µé¢</p> <p><strong>åŸå› </strong>ï¼šjenkins åœ¨å®‰è£…æ’ä»¶å‰æ€»æ˜¯å°è¯•è¿æ¥ www.google.comï¼Œæ¥åˆ¤æ–­ç½‘ç»œæ˜¯å¦è¿é€šã€‚è°·æ­Œçš„ç½‘ç«™åœ¨å¤§é™†æ˜¯è¿ä¸ä¸Šçš„ï¼Œæ‰€ä»¥ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚</p> <p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ‰§è¡Œ<code>vim /root/.jenkins/updates/default.json</code>ï¼Œå°† <code>connectionCheckUrl</code> åçš„ <code>www.google.com</code> æ”¹ä¸º <code>www.baidu.com</code> ã€‚ç„¶åé‡å¯å³å¯ã€‚</p> <p>æˆ–è€…ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">'s/www.google.com/www.baidu.com/g'</span> /root/.jenkins/updates/default.json
</code></pre></div><h3 id="å¡åœ¨-getting-startted-é¡µé¢"><a href="#å¡åœ¨-getting-startted-é¡µé¢" class="header-anchor">#</a> å¡åœ¨ getting startted é¡µé¢</h3> <p><strong>ç°è±¡</strong>ï¼šå¡åœ¨ getting startted é¡µé¢</p> <p><strong>åŸå› </strong>ï¼šjenkins é»˜è®¤çš„æ’ä»¶ä¸‹è½½æœåŠ¡å™¨åœ°å€åœ¨å›½å¤–ï¼Œå¦‚æœä¸ç¿»å¢™ä¸‹è½½ä¸äº†ã€‚</p> <p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ‰§è¡Œ<code>vim /root/.jenkins/hudson.model.UpdateCenter.xml</code>ï¼Œå°† <code>&lt;url&gt;</code> æ”¹ä¸º <code>http://mirror.xmission.com/jenkins/updates/update-center.json</code> ã€‚ç„¶åé‡å¯å³å¯ã€‚</p> <p>æˆ–è€…ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼š</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sed</span> -i <span class="token string">'/^&lt;url&gt;/s/.*/&lt;url&gt;http:\/\/mirror.xmission.com\/jenkins\/updates\/update-center.json&lt;\/url&gt;/g'</span> /root/.jenkins/hudson.model.UpdateCenter.xml
</code></pre></div><h3 id="ä»¥-root-ç”¨æˆ·è¿è¡Œ"><a href="#ä»¥-root-ç”¨æˆ·è¿è¡Œ" class="header-anchor">#</a> ä»¥ root ç”¨æˆ·è¿è¡Œ</h3> <p>ï¼ˆ1ï¼‰ä¿®æ”¹ jenkins ç”¨æˆ·</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> /etc/sysconfig/jenkins
</code></pre></div><p>ä¿®æ”¹ç”¨æˆ·</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token variable">$JENKINS_USER</span><span class="token operator">=</span><span class="token string">&quot;root&quot;</span>
</code></pre></div><p>ï¼ˆ2ï¼‰ä¿®æ”¹ <code>Jenkins</code> ç›¸å…³æ–‡ä»¶å¤¹ç”¨æˆ·æƒé™</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">chown</span> -R root:root /var/lib/jenkins
<span class="token function">chown</span> -R root:root /var/cache/jenkins
<span class="token function">chown</span> -R root:root /var/log/jenkins
</code></pre></div><p>ï¼ˆ3ï¼‰é‡å¯ Jenkins</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl restart jenkins
</code></pre></div><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><p><strong>å®˜æ–¹</strong></p> <ul><li><a href="https://jenkins.io/zh/" target="_blank" rel="noopener noreferrer">Jenkins å®˜ç½‘<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jenkins.io/zh/doc/tutorials/" target="_blank" rel="noopener noreferrer">Jenkins ä¸­æ–‡æ–‡æ¡£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><strong>å¼•ç”³</strong></p> <ul><li><a href="https://github.com/dunwu/OS" target="_blank" rel="noopener noreferrer">æ“ä½œç³»ç»Ÿã€è¿ç»´éƒ¨ç½²æ€»ç»“ç³»åˆ—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p><strong>æ–‡ç« </strong></p> <ul><li>https://jenkins.io/doc/pipeline/tour/getting-started/</li> <li>https://www.cnblogs.com/austinspark-jessylu/p/6894944.html</li> <li>http://blog.csdn.net/jlminghui/article/details/54952148</li> <li><a href="https://www.jianshu.com/p/5f671aca2b5a" target="_blank" rel="noopener noreferrer">Jenkins è¯¦ç»†æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/linux-tutorial/edit/master/docs/linux/soft/jenkins-ops.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">19 minutes ago</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/linux-tutorial/assets/js/app.79a38eea.js" defer></script><script src="/linux-tutorial/assets/js/4.fb6e0f89.js" defer></script><script src="/linux-tutorial/assets/js/58.6d6fbc82.js" defer></script><script src="/linux-tutorial/assets/js/5.cb43ecfb.js" defer></script>
  </body>
</html>
