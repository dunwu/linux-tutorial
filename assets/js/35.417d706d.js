(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{423:function(s,a,t){"use strict";t.r(a);var e=t(15),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"vmstat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vmstat"}},[s._v("#")]),s._v(" vmstat")]),s._v(" "),t("p",[s._v("显示虚拟内存状态")]),s._v(" "),t("h2",{attrs:{id:"补充说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#补充说明"}},[s._v("#")]),s._v(" 补充说明")]),s._v(" "),t("p",[t("strong",[s._v("vmstat 命令")]),s._v(" 的含义为显示虚拟内存状态（“Viryual Memor Statics”），但是它可以报告关于进程、内存、I/O 等系统整体运行状态。")]),s._v(" "),t("h3",{attrs:{id:"语法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("vmstat"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("选项"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("h3",{attrs:{id:"选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[s._v("#")]),s._v(" 选项")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("-a：显示活动内页；\n-f：显示启动后创建的进程总数；\n-m：显示slab信息；\n-n：头信息仅显示一次；\n-s：以表格方式显示事件计数器和内存状态；\n-d：报告磁盘状态；\n-p：显示指定的硬盘分区状态；\n-S：输出信息的单位。\n")])])]),t("h3",{attrs:{id:"参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[s._v("#")]),s._v(" 参数")]),s._v(" "),t("ul",[t("li",[s._v("事件间隔：状态信息刷新的时间间隔；")]),s._v(" "),t("li",[s._v("次数：显示报告的次数。")])]),s._v(" "),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[s._v("#")]),s._v(" 实例")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vmstat")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\nprocs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------\n r  b   swpd   "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v("   buff  cache   si   so    bi    bo   "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("   cs us sy "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" wa st\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("320")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42188")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("167332")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1534368")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("320")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42188")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("167332")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1534392")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("320")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42188")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("167336")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1534392")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("320")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42188")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("167336")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1534392")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("320")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42188")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("167336")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1534392")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1002")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])])]),t("p",[t("strong",[s._v("字段说明：")])]),s._v(" "),t("p",[s._v("Procs（进程）")]),s._v(" "),t("ul",[t("li",[s._v("r: 运行队列中进程数量，这个值也可以判断是否需要增加 CPU。（长期大于 1）")]),s._v(" "),t("li",[s._v("b: 等待 IO 的进程数量。")])]),s._v(" "),t("p",[s._v("Memory（内存）")]),s._v(" "),t("ul",[t("li",[s._v("swpd: 使用虚拟内存大小，如果 swpd 的值不为 0，但是 SI，SO 的值长期为 0，这种情况不会影响系统性能。")]),s._v(" "),t("li",[s._v("free: 空闲物理内存大小。")]),s._v(" "),t("li",[s._v("buff: 用作缓冲的内存大小。")]),s._v(" "),t("li",[s._v("cache: 用作缓存的内存大小，如果 cache 的值大的时候，说明 cache 处的文件数多，如果频繁访问到的文件都能被 cache 处，那么磁盘的读 IO bi 会非常小。")])]),s._v(" "),t("p",[s._v("Swap")]),s._v(" "),t("ul",[t("li",[s._v("si: 每秒从交换区写到内存的大小，由磁盘调入内存。")]),s._v(" "),t("li",[s._v("so: 每秒写入交换区的内存大小，由内存调入磁盘。")])]),s._v(" "),t("p",[s._v("注意：内存够用的时候，这 2 个值都是 0，如果这 2 个值长期大于 0 时，系统性能会受到影响，磁盘 IO 和 CPU 资源都会被消耗。有些朋友看到空闲内存（free）很少的或接近于 0 时，就认为内存不够用了，不能光看这一点，还要结合 si 和 so，如果 free 很少，但是 si 和 so 也很少（大多时候是 0），那么不用担心，系统性能这时不会受到影响的。")]),s._v(" "),t("p",[s._v("IO（现在的 Linux 版本块的大小为 1kb）")]),s._v(" "),t("ul",[t("li",[s._v("bi: 每秒读取的块数")]),s._v(" "),t("li",[s._v("bo: 每秒写入的块数")])]),s._v(" "),t("p",[s._v("注意：随机磁盘读写的时候，这 2 个值越大（如超出 1024k)，能看到 CPU 在 IO 等待的值也会越大。")]),s._v(" "),t("p",[s._v("system（系统）")]),s._v(" "),t("ul",[t("li",[s._v("in: 每秒中断数，包括时钟中断。")]),s._v(" "),t("li",[s._v("cs: 每秒上下文切换数。")])]),s._v(" "),t("p",[s._v("注意：上面 2 个值越大，会看到由内核消耗的 CPU 时间会越大。")]),s._v(" "),t("p",[s._v("CPU（以百分比表示）")]),s._v(" "),t("ul",[t("li",[s._v("us: 用户进程执行时间百分比(user time)")])]),s._v(" "),t("p",[s._v("us 的值比较高时，说明用户进程消耗的 CPU 时间多，但是如果长期超 50%的使用，那么我们就该考虑优化程序算法或者进行加速。")]),s._v(" "),t("ul",[t("li",[s._v("sy: 内核系统进程执行时间百分比(system time)")])]),s._v(" "),t("p",[s._v("sy 的值高时，说明系统内核消耗的 CPU 资源多，这并不是良性表现，我们应该检查原因。")]),s._v(" "),t("ul",[t("li",[s._v("wa: IO 等待时间百分比")])]),s._v(" "),t("p",[s._v("wa 的值高时，说明 IO 等待比较严重，这可能由于磁盘大量作随机访问造成，也有可能磁盘出现瓶颈（块操作）。")]),s._v(" "),t("ul",[t("li",[s._v("id: 空闲时间百分比")])])])}),[],!1,null,null,null);a.default=r.exports}}]);